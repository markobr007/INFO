class Nekretnina:
    def __init__(self, adresa, kvadratura, bazna_cijena):
        self.adresa = adresa
        self.kvadratura = kvadratura
        self.bazna_cijena = bazna_cijena

    def izracunaj_cijenu(self):
        return self.kvadratura * self.bazna_cijena

    def ispisi_info(self):
        print(f"Adresa: {self.adresa}")
        print(f"Kvadratura: {self.kvadratura} m²")
        print(f"Cijena: {self.izracunaj_cijenu():.2f} EUR")


class Stan(Nekretnina):
    def __init__(self, adresa, kvadratura, bazna_cijena, kat, ima_lift):
        super().__init__(adresa, kvadratura, bazna_cijena)
        self.kat = kat
        self.ima_lift = ima_lift

    def izracunaj_cijenu(self):
        cijena = super().izracunaj_cijenu()

        if self.kat > 2 and not self.ima_lift:
            cijena *= 0.9  # -10%

        if self.ima_lift:
            cijena *= 1.05  # +5%

        return cijena

    def ispisi_info(self):
        super().ispisi_info()
        print(f"Kat: {self.kat}")
        print(f"Lift: {'DA' if self.ima_lift else 'NE'}")
        print("-" * 40)


class Kuca(Nekretnina):
    def __init__(self, adresa, kvadratura, bazna_cijena, povrsina_okucnice):
        super().__init__(adresa, kvadratura, bazna_cijena)
        self.povrsina_okucnice = povrsina_okucnice

    def izracunaj_cijenu(self):
        return super().izracunaj_cijenu() + self.povrsina_okucnice * 100

    def ispisi_info(self):
        super().ispisi_info()
        print(f"Površina okućnice: {self.povrsina_okucnice} m²")
        print("-" * 40)
def unos_broja(poruka):
    while True:
        try:
            return float(input(poruka))
        except ValueError:
            print("Unesite ispravan broj!")


def unos_int(poruka):
    while True:
        try:
            return int(input(poruka))
        except ValueError:
            print(" Unesite cijeli broj!")


nekretnine = []

while True:
    print("\n===== IZBORNIK =====")
    print("1. Unos stana")
    print("2. Unos kuće")
    print("3. Ispis svih nekretnina")
    print("4. Prodaja (brisanje) nekretnine")
    print("5. Pretraga po budžetu (BONUS)")
    print("0. Izlaz")
    
    izbor = input("Odabir: ")

    if izbor == "1":
        print("\n--- Unos stana ---")
        adresa = input("Adresa: ")
        kv = unos_broja("Kvadratura: ")
        baza = unos_broja("Bazna cijena po m²: ")
        kat = unos_int("Kat: ")
        lift = input("Ima li lift? (da/ne): ").lower() == "da"

        stan = Stan(adresa, kv, baza, kat, lift)
        nekretnine.append(stan)
        print(" Stan dodan!")

    elif izbor == "2":
        print("\n--- Unos kuće ---")
        adresa = input("Adresa: ")
        kv = unos_broja("Kvadratura: ")
        baza = unos_broja("Bazna cijena po m²: ")
        okucnica = unos_broja("Površina okućnice: ")

        kuca = Kuca(adresa, kv, baza, okucnica)
        nekretnine.append(kuca)
        print(" Kuća dodana!")

    elif izbor == "3":
        print("\n--- Sve nekretnine ---")
        if not nekretnine:
            print("Nema spremljenih nekretnina.")
        else:
            for n in nekretnine:
                n.ispisi_info()

    elif izbor == "4":
        print("\n--- Prodaja nekretnine ---")
        adresa_za_brisanje = input("Unesite adresu: ")

        for n in nekretnine:
            if n.adresa.lower() == adresa_za_brisanje.lower():
                nekretnine.remove(n)
                print("Nekretnina uspješno prodana i uklonjena.")
                break
        else:
            print(" Nekretnina nije pronađena!")

    elif izbor == "5":
        print("\n--- Pretraga po budžetu ---")
        budzet = unos_broja("Maksimalni iznos: ")

        filtrirane = [n for n in nekretnine if n.izracunaj_cijenu() <= budzet]

        if not filtrirane:
            print(" Nema nekretnina unutar zadanog budžeta.")
        else:
            for n in filtrirane:
                n.ispisi_info()

    elif izbor == "0":
        print("Izlaz iz programa...")
        break

    else:
        print("Pogrešan odabir! Pokušajte ponovno.")
