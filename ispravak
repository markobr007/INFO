class nekretnina:

    def __init__(self, adresa, kvadratura, bazna_cijena):
        self.adresa = adresa
        self.kvadratura = kvadratura
        self.bazna_cijena = bazna_cijena

    def izracunaj_cijenu(self):
        return self.kvadratura * self.bazna_cijena

    def ispisi_info(self):
        return f"Adresa: {self.adresa}, Kvadratura: {self.kvadratura} m², Cijena: {self.izracunaj_cijenu():.2f} EUR"


class stan(nekretnina):

    def __init__(self, adresa, kvadratura, bazna_cijena, kat, ima_lift):
        super().__init__(adresa, kvadratura, bazna_cijena)
        self.kat = kat
        self.ima_lift = ima_lift

    def izracunaj_cijenu(self):
        cijena = super().izracunaj_cijenu()
        if self.ima_lift:
            cijena *= 1.05
        elif self.kat > 2:
            cijena *= 0.90
        return cijena

    def ispisi_info(self):
        return f"Stan | Kat: {self.kat}, Lift: {self.ima_lift}, Adresa: {self.adresa}, Kvadratura: {self.kvadratura} m², Cijena: {self.izracunaj_cijenu():.2f} EUR"


class kuca(nekretnina):

    def __init__(self, adresa, kvadratura, bazna_cijena, povrsina_okucnice):
        super().__init__(adresa, kvadratura, bazna_cijena)
        self.povrsina_okucnice = povrsina_okucnice

    def izracunaj_cijenu(self):
        return super().izracunaj_cijenu() + self.povrsina_okucnice * 100

    def ispisi_info(self):
        return f"Kuća | Okućnica: {self.povrsina_okucnice} m², Adresa: {self.adresa}, Kvadratura: {self.kvadratura} m², Cijena: {self.izracunaj_cijenu():.2f} EUR"


def ispisi_izbornik():
    print("\nIzbornik:")
    print("1. Unesi stan")
    print("2. Unesi kuću")
    print("3. Prikaži sve nekretnine")
    print("4. Prodaja nekretnine")
    print("5. Izlaz")
    print("6. Pretraga po budžetu")


nekretnine = []

while True:
    ispisi_izbornik()
    izbor = input("Unesite izbor: ")

    if izbor == "1":
        adresa = input("Adresa: ")

        while True:
            try:
                kv = float(input("Kvadratura (m²): "))
                break
            except ValueError:
                print("Pogrešan unos, pokušajte ponovo.")

        while True:
            try:
                bazna = float(input("Bazna cijena po m²: "))
                break
            except ValueError:
                print("Pogrešan unos, pokušajte ponovo.")

        while True:
            try:
                kat = int(input("Kat: "))
                break
            except ValueError:
                print("Pogrešan unos, pokušajte ponovo.")

        ima_lift = input("Ima li lift (da/ne): ").lower() == "da"

        nekretnine.append(stan(adresa, kv, bazna, kat, ima_lift))
        print("Stan uspješno unesen.")

    elif izbor == "2":
        adresa = input("Adresa: ")

        while True:
            try:
                kv = float(input("Kvadratura (m²): "))
                break
            except ValueError:
                print("Pogrešan unos, pokušajte ponovo.")

        while True:
            try:
                bazna = float(input("Bazna cijena po m²: "))
                break
            except ValueError:
                print("Pogrešan unos, pokušajte ponovo.")

        while True:
            try:
                oku = float(input("Površina okućnice (m²): "))
                break
            except ValueError:
                print("Pogrešan unos, pokušajte ponovo.")

        nekretnine.append(kuca(adresa, kv, bazna, oku))
        print("Kuća uspješno unesena.")

    elif izbor == "3":
        if not nekretnine:
            print("Nema unesenih nekretnina.")
        else:
            for n in nekretnine:
                print(n.ispisi_info())

    elif izbor == "4":
        adresa = input("Unesite adresu nekretnine za prodaju: ")
        pronađeno = False

        for n in nekretnine:
            if n.adresa == adresa:
                nekretnine.remove(n)
                print("Nekretnina je prodana i uklonjena iz baze.")
                pronađeno = True
                break

        if not pronađeno:
            print("Nekretnina s tom adresom nije pronađena.")

    elif izbor == "6":
        while True:
            try:
                budzet = float(input("Unesite maksimalni budžet (EUR): "))
                break
            except ValueError:
                print("Pogrešan unos, pokušajte ponovo.")

        print("Nekretnine unutar budžeta:")
        filtrirane = [n for n in nekretnine if n.izracunaj_cijenu() <= budzet]

        if filtrirane:
            for n in filtrirane:
                print(n.ispisi_info())
        else:
            print("Nema nekretnina unutar navedenog budžeta.")

    elif izbor == "5":
        print("Izlaz iz programa.")
        break

    else:
        print("Nevažeća opcija, pokušajte ponovo.")
